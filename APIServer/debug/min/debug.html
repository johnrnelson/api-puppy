<!DOCTYPE html>
<!-- 
    This is the DEBUG UI. Use a browser to get more information and 
    the abilty to debug.
-->



<html>

<head>


    <title>api-puppy Demo Site</title>

    <link href='https://fonts.googleapis.com/css?family=Abel' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=PT+Sans:400,400italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:300' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">



    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script src=https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js> </script> <!-- SERVER SIDE -->
    <script src=https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ext-language_tools.js> </script> <!-- SERVER SIDE -->



    <script>
//SERVER-SIDE-REPLACE!!!
    </script>


    <script>
        /*
    Simple wrapper to test the API using the browser.

    Adding in whatever you can to help the user actually use the API!
*/

const DebugUI = {
    //Quick and easy way to get data from our api...
    Fetch(data = {}) {
        const url = document.URL + '';

        return fetch(url, {
            method: "PUT", // *GET, POST, PUT, DELETE, etc.
            mode: "cors", // no-cors, cors, *same-origin
            cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
            credentials: "omit", // include, *same-origin, omit

            headers: {
                "Content-Type": "application/json",
                "Access-Control-Allow-Origin": "*",
                "Access-Control-Allow-Headers": "*",
            },
            redirect: "follow", // manual, *follow, error
            referrer: "no-referrer", // no-referrer, *client
            body: JSON.stringify(data), // body data type must match "Content-Type" header
        }).then(response => response.json()); // parses JSON response into native Javascript objects 

    },


    /*
        The rest is just setting up the UI for the user...
    */
    //Show the server info via HTML in a componet fashion....
    SetSysInfo() {
        //You will find this on the `debug.html` page...
        const SystemInfo = document.getElementById("SystemInfo");

        //Setup a simple function to add html to our DOM... super simple!!!!!!!!!
        function AddInfoElement(InfoText, InfoTip, ElementData) {
            const NewEL = document.createElement('div');
            NewEL.innerHTML = '<b>' + InfoText + '</b> : ' + ElementData;
            NewEL.title = InfoTip;
            NewEL.className = "FooterSysInfo";
            SystemInfo.appendChild(NewEL);
        }


        //The user info for the client to use...
        // console.log(debugdata.UserInfo);

        if (debugdata.UserInfo.isAuthenticated) {
            AddInfoElement('Security Level', 'Level of permissions on the server', debugdata.UserInfo.SecurityLevel);
        } else {
            AddInfoElement('Security Status', 'Your current user status from the servers perspective.', 'Not Authenticated');
        }


        AddInfoElement('Access Point', 'The protocal, port, hostname, path, and query string for the current request using for the API',
            '<b>' + window.location.protocol + '</b>//' + window.location.hostname +
            '<b>' + debugdata.UserInfo.URL + '</b>');

        AddInfoElement('Node Version', 'The version of node on this server',
            debugdata.NodeVersion);

        AddInfoElement('Server Version', 'The version of the APIServer.js file.',
            debugdata.ServerVersion);

        AddInfoElement('Start Date', 'The date the server started', debugdata.ST.toLocaleDateString() + " " + debugdata.ST.toLocaleTimeString());


    },

    //Fill the side bar with options we can use in our debugger...
    FillSideBar() {

        const dbSidebar = document.getElementById('debugger-sidbar');
        const DebugVerbList = dbSidebar.querySelector("#DebugVerbList");
        const ExampleCodeList = dbSidebar.querySelector("#ExampleCodeList");

        //When the user selects something different...
        DebugVerbList.onchange = function () {

            const SelOpt = this.selectedOptions[0];

            //Quick clear the old stuff...
            ExampleCodeList.innerHTML = "";
            // debugger;



            DebugUI.Fetch({
                service: 'help',
                data: {
                    topic: 'sample-code-list',
                    sampleid: SelOpt.value

                }
            }).then(data => {
                // console.log('Set default examples---...', data);

                for (let index = 0; index < data.samples.length; index++) {
                    const sample = data.samples[index];
                    const opt = document.createElement('option');
                    opt.value = sample;
                    opt.innerHTML = sample;
                    ExampleCodeList.appendChild(opt);
                }

                ExampleCodeList.onchange();

            }) // JSON-string from `response.json()` call
                .catch(error => {
                    console.warn('Error!');
                    console.warn(data);
                    console.error(error);
                    // debugger;
                });


        };


        //When the user selects something different...
        ExampleCodeList.onchange = function () {

            const SelVerb = DebugVerbList.selectedOptions[0];

            const SelOpt = this.selectedOptions[0];

            DebugUI.Fetch({
                service: 'help',
                data: {
                    topic: 'sample-code-fetch',
                    sampleid: SelOpt.innerHTML,
                    'target-service': SelVerb.innerHTML
                }
            }).then(data => {

                if (data.err) {
                    debugger;
                    console.warn(data.err);
                } else {

                    UIHelper.Ace.AceEditor.setValue(JSON.stringify(data.code, null, "\t"));

                    //Set the cursor so the user can start over again...
                    UIHelper.Ace.AceEditor.moveCursorTo(0);


                    UIHelper.Ace.AceDisplayRsults.setValue("{}");

                    //Set the cursor so the user can start over again...
                    UIHelper.Ace.AceDisplayRsults.moveCursorTo(0);
                }


            }) // JSON-string from `response.json()` call
                .catch(error => {
                    console.error(error);
                    debugger;
                });


        };


        for (var n in debugdata.apidata) {
            //We don't add the default here!
            // if (n != "default") {
            // }
            const namespaceData = debugdata.apidata[n];

            const optEl = document.createElement('option');
            optEl.RecordData = namespaceData;
            optEl.value = n;
            optEl.innerHTML = n;
            DebugVerbList.appendChild(optEl);

        }

        //Use the default and set the edtor....
        DebugVerbList.onchange();

    },
    OpenDialog(DialogInfo) {
        // debugger;



        const modalWindow = document.querySelector('#mastermodal');
        const modalWindowTitle = modalWindow.querySelector('.modal-title');
        const modalWindowBody = modalWindow.querySelector('.modal-body');

        modalWindowTitle.innerHTML = DialogInfo.title;
        modalWindowBody.innerHTML = DialogInfo.body;

        $('#mastermodal').modal({
            show: true
        });

    },
    //Use the HTTP to request the data...
    MakeHTTPRequest() {
        console.clear();
        console.info('\r\nRun the debug code!');


        // debugger;
        //Get our contents from the editor...
        const JSONPayload = DebugUI.GetEditorJSON();

        if (JSONPayload) {
            DebugUI.Fetch(JSONPayload)
                .then(data => {



                    /*
                    if (data.err) {
                        DebugUI.OpenDialog({
                            title: "Error runing the service",
                            body: `
                            <div>Please report this to support!</div>
                            <b>Error Message</b> : ${data.err}
                            `
                        }); 
                    }
                    */


                    UIHelper.Ace.AceDisplayRsults.setValue(JSON.stringify(data, null, "\t"));

                    //Set the cursor so the user can start over again...
                    UIHelper.Ace.AceDisplayRsults.moveCursorTo(0);



                }) // JSON-string from `response.json()` call
                .catch(error => {
                    console.warn('Error in running the debug!');
                    console.error(error);
                    // debugger;
                });
        }


    },
    //Use the socket to request the data...
    MakeSocketRequest() {
        //Get our contents from the editor...
        const JSONPayload = DebugUI.GetEditorJSON();
        console.info(JSONPayload);
        DebugUI.WebSocketConnection.send(JSON.stringify(JSONPayload));

    },
    /*
        Toggle the result panel if we are too lazy to check out the 
        window console. lol  :-)
    */
    ToggleResult(ShowFlag) {

        debugger;

        const APIDebugResultsElement = document.getElementById("APIDebugResults");
        const AceEditorElement = document.getElementById("PayloadEditor");

        //Toggle if no falg defined!
        if (!ShowFlag) {
            if (APIDebugResultsElement.style.display == "none") {
                ShowFlag = true;
            } else {
                ShowFlag = false;
            }
        }

        debugger;
        if (ShowFlag) {
            APIDebugResultsElement.style.display = "";
            // AceEditorElement.style.bottom = "200px";
        } else {
            APIDebugResultsElement.style.display = "none";
            // AceEditorElement.style.bottom = "0";
        }

        //Make sure the Ace editor knows it's been resized...
        UIHelper.Ace.AceEditor.resize();
    },


    GetEditorJSON() {

        try {
            return JSONPayload = JSON.parse(UIHelper.Ace.AceEditor.getValue());


        } catch (errorJSON) {

            const modalWindow = document.querySelector('#mastermodal');
            const modalWindowTitle = modalWindow.querySelector('.modal-title');
            const modalWindowBody = modalWindow.querySelector('.modal-body');

            modalWindowTitle.innerHTML = "Error in JSON!";

            modalWindowBody.innerHTML = `
            <div>Fix the JSON errors before attempting to call the API!</div> 
            <br> 
            `;

            $('#mastermodal').modal({
                show: true
            });
            return null;
        }

    },
    //Pop a window to show the code!
    ExportCode(TypeOfCode) {


        //Get our contents from the editor...
        const JSONPayload = DebugUI.GetEditorJSON();

        /*
            Define the languages supported and how to help...
        */
        const languages_supported = {
            'curl': function () {

                return {
                    title: 'Command line "curl"',
                    code: `curl --request GET --data '${JSON.stringify(JSONPayload)}' ${window.location.href}`,
                    help: 'Check out the man page for curl for more information.',
                }
            },
            'javascript-fetch': function () {

                return {
                    title: 'Browser javascript',
                    code: `
                var url = '${document.URL}'; 
            
                fetch(url, {
                    method: "PUT", // *GET, POST, PUT, DELETE, etc.
                    mode: "cors", // no-cors, cors, *same-origin
                    cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
                    credentials: "omit", // include, *same-origin, omit
                    headers: {
                        "Content-Type": "application/json",
                        "Access-Control-Allow-Origin": "*",
                        "Access-Control-Allow-Headers": "*",                        
                    },
                    redirect: "follow", // manual, *follow, error
                    referrer: "no-referrer", // no-referrer, *client
                    body: JSON.stringify(${JSON.stringify(JSONPayload)}), // body data type must match "Content-Type" header
                }).then(response => response.json()).then(JSON => {
                    console.info('This is the result of the request!');
                    console.log(JSON);
                    debugger;
                }); // parses JSON response into native Javascript objects 
                 
                
                `,
                    help: 'You can use xhr but I guess fetch is the new thing.',
                }
            },
            'javascript-http-request': function () {
                return {
                    title: 'NodeJS HTTP Request',
                    code: `** SAMPLE CODE for npm "request" **`,
                    help: 'There are many ways to use request objects in Node.',
                }
            },
            'python 3': function () {
                return {
                    title: 'Python 3 Broken Example :-)',
                    code: `

import json
import requests

api_token = 'your_api_token'
api_url_base = '${document.URL}'
headers = {'Content-Type': 'application/json','Authorization': 'Bearer {0}'.format(api_token)}
api_url = '{0}account'.format(api_url_base)
response = requests.get(api_url, headers=headers)
response_data = response.json() 
print(response_data)  

                `,
                    help: 'No Python experts helping us out with this?',
                }
            }
        };



        const active_lang = languages_supported[TypeOfCode]({
            jSON: 'data'
        });

        //User wants to use something we don't know about???
        if (!active_lang) {
            console.warn('somebody update something? Did you check git for the latest code? TypeOfCode"' + TypeOfCode + '" not found!');
        } else {

            DebugUI.OpenDialog({
                title: active_lang.title,
                body: `
                <div>Please help us improve this!</div>
                <pre><code>${active_lang.code.replace(/\n/g, '<br>')}</code></pre>
                <br>
                <b><i>${active_lang.help}</i></b>
                `
            });


        }//End if right type of code...
    },
    /*
        Show our TargetURI for the client to call.
    */
    SetTargetURI(TargetURI) {
        const apiURIAddress = document.getElementById('api-uri-address');
        const apiURILink = document.getElementById('api-uri-link');

        apiURIAddress.value = TargetURI;
        apiURILink.href = TargetURI;


    }
};


const UIHelper = {
    QueryStringBuilder(JSONData) {

        //Simple function to serialize the json into array for query string...
        function DigestQS(Prefix, QSObject, QSArray) {
            console.log('doing obj:', QSObject);
            for (var o in QSObject) {

                if (typeof (QSObject[o]) == "object") {
                    if (Prefix) {
                        DigestQS(Prefix + o, QSObject[o], QSArray);
                    } else {
                        DigestQS(o + ".", QSObject[o], QSArray);
                    }

                } else {
                    if (QSObject[o] != "") {
                        if (Prefix) {
                            QSArray.push(Prefix + o + "=" + QSObject[o]);
                        } else {
                            QSArray.push(o + "." + o + "=" + QSObject[o]);

                        }

                    }

                }


            }
        }

        try {
            if (typeof (JSONData) == "string") {
                JSONData = JSON.parse(JSONData);;
            }


            if (JSONData.service) {

                var selectedService = JSONData.service;
                delete JSONData["service"];

                const basicOptions = [];


                DigestQS("", JSONData, basicOptions);


                if (basicOptions.length) {
                    DebugUI.SetTargetURI('/' + selectedService + '?' + basicOptions.join('&'));
                }

            } else {
                DebugUI.SetTargetURI("**ERROR**");

            }

        } catch (errBadJSON) {
            console.warn('Error In JSON!', errBadJSON);
            DebugUI.SetTargetURI("** bad json **");
        }

    },
    Ace: {
        AceEditor: null, //Set this in code when you are ready...
        AceDisplayRsults: null, //Set this in code when you are ready...        
        SetCompleters(Editor2Complete) {


            var langTools = ace.require("ace/ext/language_tools");

            Editor2Complete.Completer = {
                getCompletions: (editor, session, caretPosition2d, prefix, callback) => {

                    var currline = editor.getSelectionRange().start.row;
                    var content = editor.session.getLine(currline);


                    const WordList = [];
                    WordList.push({
                        caption: 'service',
                        meta: '',
                        score: 10,
                    });

                    WordList.push({
                        caption: 'FunStuff',
                        meta: '',
                        score: 10,
                    });
                    WordList.push({
                        caption: 'demo',
                        meta: '',
                        score: 30,
                    });


                    callback(null, WordList.map((s) => {
                        return {
                            // name: s.caption,
                            value: s.caption,
                            score: 100,
                            meta: s.meta,
                        }
                    }))
                },
            }
            langTools.addCompleter(Editor2Complete.Completer);
        },
        HookEvents(Editor2Hook) {
            console.info('Hooking Events for the editor...');

            Editor2Hook.getSession().on('change', function (delta) {

                const editorJSON = Editor2Hook.getValue();
                UIHelper.QueryStringBuilder(editorJSON);


            });
        },
        SetupAceEditorDefaults(ParentHTMLTagID) {

            //Ace Editor is awesome! 
            var aceEditor = ace.edit(ParentHTMLTagID);

            // Go here for more options... https://github.com/ajaxorg/ace/wiki/Configuring-Ace
            aceEditor.setOption("mode", "ace/mode/json");
            aceEditor.setOption("autoScrollEditorIntoView", true);
            aceEditor.setOption("showPrintMargin", false);
            aceEditor.setOption("fontSize", 15);
            aceEditor.$blockScrolling = Infinity;

            return aceEditor;
        },

        BuildAceControls() {


            UIHelper.Ace.AceEditor = UIHelper.Ace.SetupAceEditorDefaults('PayloadEditor');
            UIHelper.Ace.AceDisplayRsults = UIHelper.Ace.SetupAceEditorDefaults('APIDebugResults');

            //Make sure display is read only!
            UIHelper.Ace.AceDisplayRsults.setReadOnly(true);

            UIHelper.Ace.AceDisplayRsults.setTheme("ace/theme/monokai");

            //Only hook the actual editor!!!!!
            UIHelper.Ace.HookEvents(UIHelper.Ace.AceEditor);



            //Add your own stuff to the drop downs...
            UIHelper.Ace.SetCompleters(UIHelper.Ace.AceEditor);


            UIHelper.Ace.AceEditor.setOptions({
                enableBasicAutocompletion: UIHelper.Ace.AceEditor.Completer,
                enableLiveAutocompletion: true,
                enableSnippets: true,
            });


        }
    },

    //Simple show tab...
    ShowTab(Tab2Show) {

        // debugger;
        if (typeof (Tab2Show) == "string") {
            Tab2Show = document.getElementById(Tab2Show);
        }

        if (!UIHelper.ActiveTab) {
            UIHelper.ActiveTab = Tab2Show;
        } else {
            UIHelper.ActiveTab.style.display = "none";
            UIHelper.ActiveTab = Tab2Show;
        }
        UIHelper.ActiveTab.style.display = "block";
    },
    MasterSocket: {
        Connnect() {
            //



            // WEBSOCKET
            var SocketURL;
            if (document.location.protocol == "https") {
                SocketURL = 'wss://' + document.location.hostname + ":" + document.location.port;
            } else {
                SocketURL = 'ws://' + document.location.hostname + ":" + document.location.port;
            }
            DebugUI.WebSocketConnection = new WebSocket(SocketURL)

            DebugUI.WebSocketConnection.onerror = error => {
                console.log(`WebSocket error: ${error}`)
            };
            DebugUI.WebSocketConnection.onmessage = e => {
                const jsonData = JSON.parse(e.data);

                //Do not display service messages!
                if (jsonData.TID == 0) {
                    console.log(jsonData);
                    return;
                }
                UIHelper.Ace.AceDisplayRsults.setValue(JSON.stringify(jsonData, null, "\t"));

                //Set the cursor so the user can start over again...
                UIHelper.Ace.AceDisplayRsults.moveCursorTo(0);

            };
            DebugUI.WebSocketConnection.onopen = () => {

                //An example...
                /*
                DebugUI.WebSocketConnection.send(JSON.stringify({
                    service: "time"
                }));
                */
            };






        }
    }

};



/*
    After page has loaded, you can be sure that everything you need
    is already loaded and ready to go...
*/
window.onload = function () {





    //Setup our UI parts...
    DebugUI.SetSysInfo();
    DebugUI.FillSideBar();


    //Setup all of our ace editors...
    UIHelper.Ace.BuildAceControls();


    console.info('The API Client has loaded. Feel free to explore this object in the console.');

    /*
        This is only available to the debug client. We 
        don't put this in normal requests from users... 
    */
    console.info(`
    
        Use : "ServerAPI" for easy code to help with testing.
        Use : "debugdata" in the console for the api data help.
    
    `);


    //Connect to our websocket server....
    UIHelper.MasterSocket.Connnect();

    //Which screen do you want to show first? Are you debugging the debugger? lol
    // UIHelper.ShowTab('TabMain');
    UIHelper.ShowTab('TabDebugger');


};

    </script>

    <style>
        /* 

    This is your chance to color up the debug UI!!! 

    Don't blame John for the ugly CSS. He's slow and color blind. :-) 

*/

body {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    overflow: hidden;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);     
}

TopNav {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0
}

MainTabDisplay {
    display: none;
    overflow: hidden;
    position: absolute;
    top: 60px;
    bottom: 0;
    left: 0;
    right: 0
}

MainTabDisplay .container {
    margin: 10px;
    padding: 10px;
    /*     
    margin-left: 10px;
    padding-left: 10px;
    margin-right: 0;
    padding-right: 0; */
}

/* 

    Other stuff.....

*/




/* The debugger section */


.ace-editor {
    border: solid 1px silver;
    position: relative;
    height: 100%;
    width: 100%;
}

.APIDebugResults {
    border: solid 1px silver;
    position: relative;
    height: 100%;
    width: 100%;
}


#TabDebugger .api-uri-display {
    position: absolute;

    top: 0;
    height: 30px;
    right: 0;
    left: 30px;
    background-color: rgb(236, 236, 236);
    color: white;
    /* padding-right:1px; */
    /* margin:4px; */
}

#TabDebugger .api-uri-display #api-uri-address {
    position: relative;
    width: 100%;
    height: 100%;
    border: 0;
    padding: 3px;

    background-color: transparent;
    font-family: 'Roboto', sans-serif;
    color: purple;
    font-weight: bold;
    text-overflow: ellipsis;

}



#TabDebugger .api-uri-browse {
    position: absolute;

    top: 0;
    height: 30px;
    left: 0;
    /* right: 0; */
    width: 30px;
    background-color: transparent;
    color: blue;
    padding: 1px;
    /* margin:4px; */
    font-size: 20px;
    text-align: center
}
#TabDebugger .api-uri-browse:hover {
    color:black;
}












/* 


sidebar 




*/
#TabDebugger #debugger-sidbar {
    position: absolute;
    top: 35px;
    bottom: 0;
    left: 0;
    width: 150px;
    background-color: rgb(54, 54, 54);
    color: white;
    padding: 5px;
    font-family: 'Abel', sans-serif;
}

#debugger-sidbar select {
    background-color: transparent;
    width: 100%;
    color: gold;    
}

#debugger-sidbar .ActionButton {
    font-family: 'Roboto', sans-serif;
    font-size: 16px;

    font-variant: small-caps;


    border-radius: 6px;

    color: rgb(82, 82, 82);

    left: 0;
    right: 0;

    text-align: center;
    text-decoration: none;

    /* background-color: rgb(212, 212, 212); */
    cursor: pointer;
    margin-top: 10px;
    text-shadow: 1px 1px 1px #ffffff;    
    background: -webkit-radial-gradient(center, ellipse cover, #F5F5F5 0%, rgb(194, 194, 194) 100%);    
}
#debugger-sidbar .ActionButton:hover {
    color: blue;
     
}



/* Main help text classes...  */

.HelpText {
    color: rgb(94, 94, 94);
    font-size: 16px;
    font-family: 'PT Sans', sans-serif;    
}

pre {
    margin: 5px;
    padding: 25px;
    background-color: rgb(238, 238, 238);
    height: 80%;
    overflow: auto;
}

pre code {
    white-space: nowrap !important;
}

.buttonclick {
    cursor: pointer;
    color: green;
}

.todo-item {
    color: green;
    font-size: 12px;
}

/* 
FOOTER STYLES!!!!!! 
*/

.footer-row {
    padding-top: 50px;
    margin-bottom: 100px;
    font-family: 'Abel', sans-serif;    
    font-size: 16px;
   
}

.FooterHeading {
    color: green;
    font-size: 18px;
    font-weight: bold;
}
 

.FooterSysInfo {
    color: gray;
    cursor: default;
}

.FooterSysInfo:hover {
    color: silver !important;
    cursor: hand;
}

 

















/* 
split info from https://gist.github.com/jpnelson/52d6f38820c6d028bdf8

slightly modified.... 
*/


.split-container {
    position: absolute;
    left: 150px;
    right: 0;
    top: 35px;
    bottom: 0;
    border: 0;
    background-color: transparent;


}

.split {
    display: flex;
    height: 100%;
    /* border: 1px solid black; */
}

.split-container .split .header {
    width: 100%;
    background-color: rgb(0, 70, 70);
    color: white;
    cursor: help;
    border: solid 1px silver;
    padding: 2px;

    text-shadow: 1px 1px 1px #202020;    
    font-family: 'Roboto Condensed', sans-serif;
    font-size: 16px;
    font-weight: bold;
    /* font-variant: small-caps; */
}


.split> :nth-child(1) {
    overflow: scroll;
}

.split> :nth-child(2) {
    flex-grow: 1;
}

/* Vertical */

.split.vertical {
    flex-direction: column;
}

.split.vertical> :nth-child(1) {
    resize: vertical;
}

/* Horizontal */

.split.horizontal {
    flex-direction: row;
}

.split.horizontal> :nth-child(1) {
    resize: horizontal;
}




/* 
 Bad results here!
.split div {} 
*/
    </style>
</head>

<body>





    <div id="mastermodal" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Set via code....</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">Set via code....</div>

            </div>
        </div>
    </div>





    <TopNav>
        <nav class="navbar navbar-expand navbar-light bg-light">
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item" title="Basic help about the user interface">
                        <a class="nav-link" href="JavaScript:UIHelper.ShowTab('TabMain')">Main Help</a>
                    </li>
                    <li class="nav-item" title="Interactive debugger to test with">
                        <a class="nav-link" href="JavaScript:UIHelper.ShowTab('TabDebugger')">Debug Tool</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">GitHub</a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a target="_blank" class="dropdown-item" title="The actual source code for the project"
                                href="https://github.com/johnrnelson/api-puppy">Project</a>
                            <a target="_blank" class="dropdown-item" title="Issues? We all have them. :-)""
                                href=" https://github.com/johnrnelson/api-puppy/issues">Issues </a> <div
                                class="dropdown-divider"></div>
                        <a target="_blank" class="dropdown-item" title="Hope this is helpful"
                            href="https://github.com/johnrnelson/api-puppy/tree/master/Notes">Notes</a>
            </div>
            </li>
            </ul>
            </div>
        </nav>
    </TopNav>


    <!-- Because of the editor, you need to declare this first! -->
    <MainTabDisplay id="TabDebugger">
        <span class="api-uri-browse" title="Open a new tab to test the URL">
            <a id="api-uri-link" href="/testme/woof" target="_blank"> <i class="fas fa-globe"></i> </a>
        </span>
        <span class="api-uri-display" title="URI Endpoint address">
            <input id="api-uri-address"
                value="/time/is/on-your-side/if-your-smart/about/it?testValA=abc&testlongvalformetotestwithis=ofmythis_isreallylongwoohooooooo" />
        </span>


        <div id="debugger-sidbar">
            <center>


                <select id="DebugVerbList" title="List of basic services provided by this server"></select>
                <br>
                <select id="ExampleCodeList" title="Sample code to test with."></select>
                <br>

                <div title="Use HTTP for the request" onclick="DebugUI.MakeHTTPRequest()"
                    class="ActionButton">HTTP Request</div>


                <div title="Use the socket for the request" onclick="DebugUI.MakeSocketRequest()"
                    class="ActionButton">Socket Request</div>


                <div style="padding-top:15px;">Export Options</div>

                <div title="Export sample code for CURL" onclick="DebugUI.ExportCode('curl')" class="ActionButton">CURL
                </div>

                <div title="Export sample code for JavaScript Browser" onclick="DebugUI.ExportCode('javascript-fetch')"
                    class="ActionButton">
                    JavaScript</div>

                <div title="Export sample code for JavaScript HTTP Client"
                    onclick="DebugUI.ExportCode('javascript-http-request')" class="ActionButton">NodeJS</div>

                <div title="Export sample code for pythod 3" onclick="DebugUI.ExportCode('python 3')"
                    class="ActionButton">Python3</div>

                <hr width="90%" size="1" color="gold" />



            </center>
        </div>

        <div class="split-container">
            <div class="split horizontal">
                <div style="width:50%">
                    <div class="header" title="The body of the request in JSON format">&nbsp;<i class="fas fa-upload"
                            style="color:silver"></i>&nbsp;Upload JSON Request
                    </div>
                    <div id="PayloadEditor" class="ace-editor"></div>
                </div>
                <div>
                    <div class="header" title="The result of the request in JSON format">&nbsp;<i
                            class="fas fa-download" style="color:silver"></i>&nbsp;Download JSON
                        from Server</div>
                    <div id="APIDebugResults" class="APIDebugResults"></div>

                </div>
            </div>
        </div>


    </MainTabDisplay>


    <MainTabDisplay id="TabMain" style="overflow:auto;">
        <!-- HelpDisplay -->


<div class="container">

    <!-- <div class="page-header">
                <h1>api-puppy</h1>
            </div> -->


    <div class="row">
        <div class="col-sm-4">
            <div class="alert alert-info" role="alert">
                This is just a Demo for api-puppy
            </div>

            <div class="alert alert-primary" role="alert">
                <small>
                    This is not another framework or library or
                    even a template, it's just a demo!
                    <br>
                </small>
            </div>

        </div>
        <div class="col-sm-8">
            <div class="HelpText">

                <p>
                    This is actually the API. Seriously!

                </p>

                <p>
                    You are going to find bugs because this is just a DEMO! Lots of work
                    needs to be done and things may or may not get worked on.
                </p>
                <p>
                    Check out the
                    <a target="_blank" href="https://github.com/johnrnelson/api-puppy">GitHub Project</a> to
                    see the source code to see how you can use it in your own projects.
                </p>

                <p>
                    Use the <a href="JavaScript:UIHelper.ShowTab('TabDebugger')">Debug Tool</a> for testing
                    the API to make sure you get what you want before having to test it in your own code.
                </p>
            </div>
        </div>
    </div>







    <!-- footer -->
    <div class="row footer-row">
        <div id="SystemInfo" class="col-md-8">
            <div class="FooterHeading">System Information</div>
        </div>
        <div class="col-md-4">
            <div class="FooterHeading">Open Source Components</div>

            <a title="Used to make the simple UI" target="_blank" href="https://getbootstrap.com/">Bootstrap</a>
            <br>
            <a title="Code editor for the API Explorer" target="_blank" href="https://ace.c9.io/">Ace Editor</a>
            <br>
            <a title="Wikipedia article about jQuery" target="_blank"
                href="https://en.wikipedia.org/wiki/JQuery">jQuery</a>
            <br>
            <a title="Wikipedia article about Node.js" target="_blank"
                href="https://en.wikipedia.org/wiki/Node.js">Node.js</a>
            <br>
        </div>
    </div>
</div>
    </MainTabDisplay>
</body>

</html>