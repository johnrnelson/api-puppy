<!DOCTYPE html>
<html lang="en-US">

<!-- 
    This is the DEBUG UI. Use a browser to get more information and 
    the abilty to debug.
-->

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Loading API Tool</title>

    <link href='//fonts.googleapis.com/css?family=Abel' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Roboto+Condensed:300' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">



    <link rel="stylesheet" href="//cdn.metroui.org.ua/v4/css/metro-all.min.css">

    <link rel="stylesheet" href="//cdn.metroui.org.ua/v4/css/metro.min.css">
    <link rel="stylesheet" href="//cdn.metroui.org.ua/v4/css/metro-colors.min.css">
    <link rel="stylesheet" href="//cdn.metroui.org.ua/v4/css/metro-rtl.min.css">
    <link rel="stylesheet" href="//cdn.metroui.org.ua/v4/css/metro-icons.min.css">

    <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="//cdn.metroui.org.ua/v4/js/metro.min.js"></script>


    <script src="//cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js"> </script> <!-- SERVER SIDE -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ext-language_tools.js"> </script> <!-- SERVER SIDE -->


    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"> </script> <!-- SERVER SIDE -->



    <script>
//SERVER-SIDE-REPLACE!!!
    </script>


    <script>
        /*
    Simple wrapper to test the API using the browser.

    Adding in whatever you can to help the user actually use the API!
*/

const WebApp = {
    /*
        Quick and easy way to get data from our api...
        Ex: WebApp.Fetch
    */
    Fetch(data = {}) {
        const url = document.URL + '';

        // console.info('Add key to Data->',WebApp.AppPrefs.UserOptions.APIKEY);

        //Allways add the APIKEY to outbound requests to the server...
        data.APIKEY = WebApp.AppPrefs.UserOptions.APIKEY;


        return fetch(url, {
            method: "PUT", // *GET, POST, PUT, DELETE, etc.
            mode: "cors", // no-cors, cors, *same-origin
            cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
            credentials: "omit", // include, *same-origin, omit

            headers: {
                "Content-Type": "application/json",
                "Access-Control-Allow-Origin": "*",
                "Access-Control-Allow-Headers": "*",
            },
            redirect: "follow", // manual, *follow, error
            referrer: "no-referrer", // no-referrer, *client
            body: JSON.stringify(data), // body data type must match "Content-Type" header
        }).then(response => response.json()); // parses JSON response into native Javascript objects 

    },
    GetHelpFile(FilePath, OnFetch) {
        // WebApp.GetHelpFile('',function(){});

        WebApp.Fetch({
            service: 'help',
            data: {
                topic: 'debug-code-fetch',
                filepath: FilePath
            }
        }).then(data => {
            if (data.err) {
                console.warn(data.err);
            } else {
                OnFetch(data);
            }


        }).catch(error => {
            console.warn('Error!');
            console.error(error);
            // debugger;
        });

    },

    //Your local app preferences...
    AppPrefs: {
        UserOptions: {
            APIKEY: '',
            UserID: '',
            TargetAPI: {
                url: document.URL,
                opts: {
                    favor: 'put'
                }
            }
        },
    }
};


if (localStorage) {
    const UserOptionsText = localStorage.getItem('UserOptions');

    if (UserOptionsText) {
        console.info('Reloading App options....');
        WebApp.AppPrefs.UserOptions = JSON.parse(UserOptionsText);
    } else {
        console.info('Storing (local) App options....');
        localStorage.setItem("UserOptions", JSON.stringify(WebApp.AppPrefs.UserOptions));
    }

} else {
    alert('No Local Storage!');
}









/*
    Wrap up what ya want to make dealing with the UI as easy 
    as possible...
*/
const DebugUI = {


    /*
        The rest is just setting up the UI for the user...
    */
    //Show the server info via HTML in a componet fashion....
    SetSysInfo() {

        
        //You will find this on the `debug.html` page...
        const SystemInfo = document.getElementById("SystemInfo");

        //Setup a simple function to add html to our DOM... super simple!!!!!!!!!
        function AddInfoElement(InfoText, InfoTip, ElementData) {

            const NewEL = document.createElement('div');
            NewEL.innerHTML = '<span class="SysInfoLabel">' + InfoText + '</span><br>' +
                '<span class="SysInfoValue">' + ElementData + '</span>';
            NewEL.title = InfoTip;
            NewEL.className = "SysInfoItem";
            SystemInfo.appendChild(NewEL);
            console.log(NewEL)
        }


        //The user info for the client to use...
        // console.log(debugdata.UserInfo);

        if (debugdata.UserInfo.isAuthenticated) {
            AddInfoElement('Security Level', 'Level of permissions on the server', debugdata.UserInfo.SecurityLevel);
        } else {
            AddInfoElement('Security Status', 'Your current user status from the servers perspective.', 'Not Authenticated');
        }


        AddInfoElement('Access Point', 'The protocal, port, hostname, path, and query string for the current request using for the API',
            '<b>' + window.location.protocol + '</b>//' + window.location.hostname +
            '<b>' + debugdata.UserInfo.URL + '</b>');

        AddInfoElement('Node Version', 'The version of node on this server',
            debugdata.NodeVersion);

        AddInfoElement('Server Version', 'The version of the APIServer.js file.', debugdata.ProjectInfo.Version);

        AddInfoElement('Start Date', 'The date the server started', debugdata.ST.toLocaleDateString() + " " + debugdata.ST.toLocaleTimeString());



    },

    SelectServiceOption(ServiceName) {


        const DebugVerbList_BTN = document.getElementById("DebugVerbList_BTN");

        const DebugSampleList_UL = document.getElementById("DebugSampleList_UL");

        // const SelOpt = this.selectedOptions[0];

        //Quick clear the old stuff...
        DebugSampleList_UL.innerHTML = "";
        // debugger;
        DebugVerbList_BTN.innerHTML = ServiceName;
        DebugVerbList_BTN.ServiceName = ServiceName;



        WebApp.Fetch({
            service: 'help',
            data: {
                topic: 'sample-code-list',
                sampleid: ServiceName

            }
        }).then(data => {
            // console.log('Set default examples---...', data);


            for (let index = 0; index < data.samples.length; index++) {
                const sample = data.samples[index];

                //Set Default...
                if (index == 0) {
                    DebugUI.SelectSampleCodeOption(sample);
                }


                const optUL = document.createElement('li');
                optUL.SampleName = sample;
                optUL.onclick = function () {
                    DebugUI.SelectSampleCodeOption(this.SampleName);
                };
                optUL.innerHTML = '<li><a href="#">' + sample + '</a></li>';
                DebugSampleList_UL.appendChild(optUL);
            }


        }).catch(error => {
            console.warn('Error!');
            console.error(error);
            // debugger;
        });

    },
    SelectSampleCodeOption(SampleCode) {

        const DebugVerbList_BTN = document.getElementById("DebugVerbList_BTN");

        const DebugSampleList_BTN = document.getElementById("DebugSampleList_BTN");

        const displayDateMod = document.getElementById('Date_Downloaded');
        displayDateMod.innerHTML = "";


        //Quick clear the old stuff...
        // DebugSampleList_UL.innerHTML = "";

        DebugSampleList_BTN.innerHTML = SampleCode;


        WebApp.Fetch({
            service: 'help',
            data: {
                topic: 'sample-code-fetch',
                sampleid: SampleCode,
                'target-service': DebugVerbList_BTN.ServiceName
            }
        }).then(data => {

            if (data.err) {
                debugger;
                console.warn(data.err);
            } else {

                UIHelper.Ace.AceEditor.setValue(JSON.stringify(data.code, null, "\t"));

                //Set the cursor so the user can start over again...
                UIHelper.Ace.AceEditor.moveCursorTo(0);
                UIHelper.Ace.AceEditor.resize();


                UIHelper.Ace.AceDisplayRsults.setValue("{}");

                //Set the cursor so the user can start over again...
                UIHelper.Ace.AceDisplayRsults.moveCursorTo(0);
                UIHelper.Ace.AceDisplayRsults.resize();
            }


        }).catch(error => {
            console.error(error);
            debugger;
        });



    },
    //Fill the side bar with options we can use in our debugger...
    FillSideBar() {
        try {


            const DebugVerbList_UL = document.getElementById("DebugVerbList_UL");
            DebugVerbList_UL.innerHTML = "";

            const dbSidebar = document.getElementById('debugger-sidbar');


            for (var n in debugdata.apidata) {

                const namespaceData = debugdata.apidata[n];

                const optUL = document.createElement('li');
                optUL.RecordData = namespaceData;
                optUL.ServiceName = n;
                optUL.onclick = function () {
                    DebugUI.SelectServiceOption(this.ServiceName);
                };
                optUL.innerHTML = '<li><a href="#">' + n + '</a></li>';
                DebugVerbList_UL.appendChild(optUL);

            }

            //Use the default and set the edtor....            
            DebugUI.SelectServiceOption('logger');



        } catch (errFillSideBar) {
            console.warn(errFillSideBar);
            debugger;
        }
    },

    //Use the HTTP to request the data...
    MakeHTTP_PUT_Request() {

        // debugger;
        //Get our contents from the editor...
        const JSONPayload = DebugUI.GetEditorJSON();




        if (JSONPayload) {
            WebApp.Fetch(JSONPayload)
                .then(data => {

                    const resultJSONText = JSON.stringify(data, null, "\t");
                    DebugUI.ShowJSONResult('HTTP', resultJSONText);

                    HistoryLogger.Logger.Add({
                        TID: 0,
                        Type: 200,
                        DT: new Date(),
                        Topic: "HTTP Request",
                        Source: "Browser",
                        Body: "<i>" + resultJSONText + "</i>",
                    });

                }) // JSON-string from `response.json()` call
                .catch(error => {
                    console.warn('Error in running the debug!');
                    console.error(error);
                    // debugger;
                });
        }


    },
    //Use the socket to request the data...
    MakeSocketRequest() {

        const displayDateUP = document.getElementById('Date_Downloaded');
        displayDateUP.innerHTML = "@" + new Date().toLocaleTimeString();

        //Get our contents from the editor...
        const JSONPayload = DebugUI.GetEditorJSON();
        // console.info(JSONPayload);

        // SocketAPI.MasterSocket.WebSocketConnection.send(JSON.stringify(JSONPayload));
        SocketAPI.MasterSocket.WebSocketConnection.SendData(JSONPayload, function (SckData) {
            console.info('call back is good--', SckData);

            DebugUI.ShowJSONResult('Socket', JSON.stringify(SckData, null, "\t"));

        });


    },
    GetEditorJSON() {

        try {
            return JSONPayload = JSON.parse(UIHelper.Ace.AceEditor.getValue());


        } catch (errorJSON) {

            const modalWindow = document.querySelector('#mastermodal');
            const modalWindowTitle = modalWindow.querySelector('.modal-title');
            const modalWindowBody = modalWindow.querySelector('.modal-body');

            modalWindowTitle.innerHTML = "Error in JSON!";

            modalWindowBody.innerHTML = `
            <div>Fix the JSON errors before attempting to call the API!</div> 
            <br> 
            `;

            $('#mastermodal').modal({
                show: true
            });
            return null;
        }

    },
    //Pop a window to show the code!
    ExportCode(TypeOfCode) {


        //Get our contents from the editor...
        const JSONPayload = DebugUI.GetEditorJSON();

        /*
            Define the languages supported and how to help...
        */
        const languages_supported = {
            'curl': function () {

                return {
                    title: 'Command line "curl"',
                    code: `curl --request GET --data '${JSON.stringify(JSONPayload)}' ${window.location.href}`,
                    help: 'Check out the man page for curl for more information.',
                }
            },
            'javascript-fetch': function () {

                return {
                    title: 'Browser javascript',
                    code: `
                var url = '${document.URL}'; 
            
                fetch(url, {
                    method: "PUT", // *GET, POST, PUT, DELETE, etc.
                    mode: "cors", // no-cors, cors, *same-origin
                    cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
                    credentials: "omit", // include, *same-origin, omit
                    headers: {
                        "Content-Type": "application/json",
                        "Access-Control-Allow-Origin": "*",
                        "Access-Control-Allow-Headers": "*",                        
                    },
                    redirect: "follow", // manual, *follow, error
                    referrer: "no-referrer", // no-referrer, *client
                    body: JSON.stringify(${JSON.stringify(JSONPayload)}), // body data type must match "Content-Type" header
                }).then(response => response.json()).then(JSON => {
                    console.info('This is the result of the request!');
                    console.log(JSON);
                    debugger;
                }); // parses JSON response into native Javascript objects 
                 
                
                `,
                    help: 'You can use xhr but I guess fetch is the new thing.',
                }
            },
            'javascript-http-request': function () {
                return {
                    title: 'NodeJS HTTP Request',
                    code: `** SAMPLE CODE for npm "request" **`,
                    help: 'There are many ways to use request objects in Node.',
                }
            },
            'python 3': function () {
                return {
                    title: 'Python 3 Broken Example :-)',
                    code: `

import json
import requests

api_token = 'your_api_token'
api_url_base = '${document.URL}'
headers = {'Content-Type': 'application/json','Authorization': 'Bearer {0}'.format(api_token)}
api_url = '{0}account'.format(api_url_base)
response = requests.get(api_url, headers=headers)
response_data = response.json() 
print(response_data)  

                `,
                    help: 'No Python experts helping us out with this?',
                }
            }
        };



        const active_lang = languages_supported[TypeOfCode]({
            jSON: 'data'
        });

        //User wants to use something we don't know about???
        if (!active_lang) {
            console.warn('somebody update something? Did you check git for the latest code? TypeOfCode"' + TypeOfCode + '" not found!');
        } else {


            Metro.dialog.create({
                title: active_lang.title,
                content: `
                <div>Please help us improve this!</div>
                
                <textarea rows="7 cols="10" style="white-space:nowrap;width:100%;height:100%" id="ExampleCodeDisplay">${active_lang.code}</textarea>
                <br>
                <b><i>${active_lang.help}</i></b>
                `,
                actions: [
                    {
                        caption: "Copy to Clipboard",
                        cls: "js-dialog-close",
                        onclick: function () {
                            UIHelper.CopyToClipboard('ExampleCodeDisplay');
                            // const tblBody = document.getElementById('HistoryLoggerTable');
                            // tblBody.innerHTML = "";
                        }
                    },
                    {
                        caption: "Close",
                        cls: "js-dialog-close",
                        onclick: function () {
                            //All Done...
                        }
                    }
                ]

            });



        }//End if right type of code...
    },
    /*
        Show our TargetURI for the client to call.
    */
    SetTargetURI(TargetURI) {

        const apiURILink = document.getElementById('api-uri-link');

        apiURILink.href = TargetURI;

    },
    ShowJSONResult(JSONSource, JSONText) {
        const displayDateMod = document.getElementById('Date_Downloaded');
        displayDateMod.innerHTML = ' using [' + JSONSource + '] &nbsp;@' + new Date().toLocaleTimeString();

        UIHelper.Ace.AceDisplayRsults.setValue(JSONText);

        //Set the cursor so the user can start over again...
        UIHelper.Ace.AceDisplayRsults.moveCursorTo(0);

        UIHelper.Ace.AceDisplayRsults.resize();

        HistoryLogger.Logger.Add({
            TID: 0,
            Type: 707,
            DT: new Date(),
            Topic: "Display JSON from the server",
            Source: JSONSource,
            Body: "<i>" + JSONText + "</i>",
        });

    }
};


/*
    Simple app prefs manager...
*/
WebApp.GetHelpFile('HistoryLogger.js', function (filecontents) {
    const srcHistoryLogger = document.createElement("script");
    srcHistoryLogger.innerHTML = filecontents.body;
    document.head.appendChild(srcHistoryLogger);
});


/* 
    Go grab our styles using the API to show an example of
    another way to use it. Of course you don't want to 
    actually get your CSS files this way, but it's yet
    another example of how to use a web API...
*/
WebApp.GetHelpFile('debug.css', function (filecontents) {
    const CSSFile = document.createElement("style");
    CSSFile.type = "text/css";
    CSSFile.innerHTML = filecontents.body;
    document.head.appendChild(CSSFile);
});


//Stuff our help display since it's so big and the least dynamic.. :-)
WebApp.GetHelpFile('HelpDisplay.html', function (filecontents) {
    document.getElementById("TabMain").innerHTML = filecontents.body;
    //Now show the sys info in the main display...
    DebugUI.SetSysInfo();
});



/*
    After page has loaded, you can be sure that everything you need
    is already loaded and ready to go...
*/
window.onload = function () {

    /* 
        Extra Helper code...
    */
    WebApp.GetHelpFile('UIHelper.js', function (filecontents) {

        // debugger;
        window.eval(filecontents.body);

        HistoryLogger.Logger.Add({
            TID: 0,
            Type: 707,
            DT: new Date(),
            Topic: "UI Help",
            Source: "Browser",
            Body: "The JavaScript UI helper has been loaded and we ready to go!",
        });





        //Setup our UI parts...
        DebugUI.FillSideBar();

        //Setup all of our ace editors...
        UIHelper.Ace.BuildAceControls();

        UIHelper.AppPrefs.ShowPrefs();


        /*
            This is only available to the debug client. We 
            don't put this in normal requests from users... 
        */
        console.info(`    
        Use : "ServerAPI" for easy code to help with testing.
        Use : "debugdata" in the console for the api data help.    
            `);


        /*
            Use the help service to get the Socket API code. 
            It's just another way to use the API and shows
            how you can do this own a seperate domain and 
            still get the updates...
        */
        WebApp.GetHelpFile('SocketAPI.js', function (filecontents) {
            const srcSocketAPI = document.createElement("script");
            srcSocketAPI.innerHTML = filecontents.body;
            document.head.appendChild(srcSocketAPI);

            /*
               Overwrite the events to customize it for 
               this domain and this DEMO!
           */
            SocketAPI.MasterSocket.Events.onmessage = function (jsonData) {
                // const jsonData = JSON.parse(e.data);
                var displaymsg;

                if (jsonData.msg) {
                    displaymsg = jsonData.msg;
                } else {
                    displaymsg = jsonData;
                }

                if (!displaymsg) {
                    debugger;
                }



                HistoryLogger.Logger.Add({
                    Type: 466,
                    TID: 505,
                    DT: new Date(),
                    Topic: "Socket Traffic",
                    Source: "Socket",
                    Body: displaymsg
                });

                //Do not display service messages!
                if (jsonData.TID == 0) {
                    // console.log('Web Socket Service Mesage:', jsonData);                
                    return;
                }

            };

            //Once connected...
            SocketAPI.MasterSocket.Events.onopen = function () {

                HistoryLogger.Logger.Add({
                    Type: 411,
                    TID: 0,
                    DT: new Date(),
                    Topic: "Socket Connected!",
                    Source: "Browser",
                    Body: "The web socket is connected and ready to go!",
                });
            };

            //When disconected...
            SocketAPI.MasterSocket.Events.onclose = function () {
                HistoryLogger.Logger.Add({
                    Type: 411,
                    TID: 0,
                    DT: new Date(),
                    Topic: "Socket Closed!",
                    Source: "Browser",
                    Body: "The web socket has disconnected!",
                });

                console.info('ask to re-connect...');
            };

            //After events are rewired, connect the socket...
            SocketAPI.MasterSocket.Connnect();
        });




        HistoryLogger.Logger.Add({
            TID: 0,
            Type: 707,
            DT: new Date(),
            Topic: "UI Status",
            Source: "Browser",
            Body: "The browser UI should be loaded and ready to go!",
        });



        //Which screen do you want to show first? Are you debugging the debugger? lol
        UIHelper.ShowTab('TabMain');

        //Set default logger view...
        HistoryLogger.Logger.SetListType('0');


        //If you local host you are most likely debugging.. :-)
        if (document.location.hostname == "localhost") {
            // debugger;
            // UIHelper.ShowTab('TabDebugger');
            // UIHelper.ShowTab('HistoryLogger');
            // UIHelper.ShowTab('GitHubLinks');
            // UIHelper.ShowTab('TabAppPrefs');
        }


        document.title = debugdata.ProjectInfo.Title;

    }); //end UIHelper....

};

    </script>


</head>

<body>

    <desktop>


        <sidemenu>
            <!-- https://metroui.org.ua/menu.html#_h_menu -->
            <ul class="t-menu open verticle compact">
                <li id="TabMain-BTN" data-role="hint" data-hint-position="right"
                    data-hint-text="Basic help about the user interface">
                    <a href="JavaScript:UIHelper.ShowTab('TabMain')"><span class="fas fa-home"></span></a>
                </li>

                <li id="TabDebugger-BTN" data-role="hint" data-hint-position="right"
                    data-hint-text="Interactive debugger to test with">
                    <a href="JavaScript:UIHelper.ShowTab('TabDebugger')"><span class="fas fa-bug"></span></a></li>



                <li id="HistoryLogger-BTN" data-role="hint" data-hint-position="right"
                    data-hint-text="Simple logger so you don't have to use the console"><a
                        href="JavaScript:UIHelper.ShowTab('HistoryLogger')"><span class="fas fa-file-code"></span></a>
                </li>


                <li id="TabAppPrefs-BTN" data-role="hint" data-hint-position="right"
                    data-hint-text="Web App Preferences"><a href="JavaScript:UIHelper.ShowTab('TabAppPrefs')">
                        <span class="fas fa-cogs"></span></a></li>

                <!-- <li id="GitHubLinks-BTN" data-role="hint" data-hint-position="right"
                    data-hint-text="GitHub project for the source code"><a
                        href="JavaScript:UIHelper.ShowTab('GitHubLinks')">
                        <span class="fab fa-github"></span></a></li> -->


            </ul>

        </sidemenu>
 

        <!-- Log the history and help the user know whats up... -->
        <MainTabDisplay id="HistoryLogger">
            <ul class="h-menu">
                <li title="Clear the log history"><a href="JavaScript:HistoryLogger.Logger.Clear()">Clear</a></li>
                <li title="Export to a file"><a href="JavaScript:UIHelper.NA()">Export</a></li>
            </ul>
            <div class="split-container">
                <div data-role="splitter" class="h-100" data-split-sizes="20, 60" data-min-sizes="160,160"
                    data-max-sizes="340,0" data-gutter-size="8">
                    <div class="d-flex flex-justify-left flex-align-left">
                        <ul id="LogTree" data-role="treeview">
                            <li data-caption="Local Logs">

                                <ul>
                                    <li data-icon="<i class='fas fa-globe-americas fa-fw'></i>" data-caption="HTTP REST"
                                        onclick="HistoryLogger.Logger.SetListType('200')">
                                        <span class="LgCnt" id="LgCnt-200"></span>
                                    </li>
                                    <li data-icon="<i class='fas fa-info-circle fa-fw'></i>"
                                        data-caption="Basic Information"
                                        onclick="HistoryLogger.Logger.SetListType('411')">
                                        <span class="LgCnt" id="LgCnt-411"></span>
                                    </li>
                                    <li data-icon="<i class='fas fa-share-alt'></i>" data-caption="Socket History"
                                        onclick="HistoryLogger.Logger.SetListType('466')">
                                        <span class="LgCnt" id="LgCnt-466"></span>
                                    </li>
                                    <li data-icon="<i class='fas fa-eye'></i>" data-caption="UI Updates"
                                        onclick="HistoryLogger.Logger.SetListType('707')">
                                        <span class="LgCnt" id="LgCnt-707"></span>
                                    </li>
                                    <li data-icon="<i class='fas fa-info'></i>" data-caption="Generic Errors"
                                        onclick="HistoryLogger.Logger.SetListType('0')">
                                        <span class="LgCnt" id="LgCnt-0"></span>
                                    </li>
                                </ul>
                            </li>
                            <li data-caption="Remote Logs" collapsed>

                                <ul>
                                    <li onclick="HistoryLogger.Logger.FetchRemoteByType('php')"
                                        data-icon="<i class='fas fa-file'></i>" data-caption="PHP Requests" disabled>
                                    </li>
                                    <li onclick="HistoryLogger.Logger.FetchRemoteByType('Socket')"
                                        data-icon="<i class='fas fa-share-alt'></i>" data-caption="Socket History"
                                        disabled>
                                    </li>
                                    <li onclick="HistoryLogger.Logger.FetchRemoteByType('WebErrors')"
                                        data-icon="<i class='fas fa-file'></i>" data-caption="Web Errors" disabled>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="d-flex flex-justify-left flex-align-left">



                        <LoggerTable id="LGType-LgOpts">
                            <div>
                                <h3>Logging Options</h3>
                                <p>
                                    Working on this! :-)
                                </p>
                            </div>
                        </LoggerTable>


                        <LoggerTable haslog="true" id="LGType-0" style="display:block">
                            <div class="LoggerLabel">Generic Errors</div>
                            <table class="table  striped compact" style="background: transparent;">
                                <thead>
                                    <tr>
                                        <th width="120px" vertical-align="top" nowrap="true">Date/Time</th>
                                        <th width="20%" vertical-align="top" nowrap="true">Topic</th>
                                        <th width="20%" vertical-align="top" nowrap="true">Source</th>
                                        <th widht="100%" vertical-align="top">Body</th>
                                    </tr>
                                </thead>
                                <tbody id="LGType-0-history" class="row-hover">
                                </tbody>
                            </table>
                        </LoggerTable>
                        <LoggerTable haslog="true" id="LGType-serverlogs">
                            <div class="LoggerLabel">Server Logs</div>
                            <table class="table  striped compact" style="background: transparent;">
                                <thead>
                                    <tr>
                                        <th width="120px" vertical-align="top" nowrap="true">Date/Time</th>
                                        <th width="20%" vertical-align="top" nowrap="true">Topic</th>
                                        <th width="20%" vertical-align="top" nowrap="true">Source</th>
                                        <th widht="100%" vertical-align="top">Body</th>
                                    </tr>
                                </thead>
                                <tbody id="LGType-serverlogs-history" class="row-hover">
                                </tbody>
                            </table>
                        </LoggerTable>

                        <LoggerTable haslog="true" id="LGType-200">
                            <div class="LoggerLabel">HTTP traffice using REST</div>
                            <table class="table  striped compact" style="background: transparent;">
                                <thead>
                                    <tr>
                                        <th width="120px" vertical-align="top" nowrap="true">Date/Time</th>
                                        <th width="20%" vertical-align="top" nowrap="true">Topic</th>
                                        <th width="20%" vertical-align="top" nowrap="true">Source</th>
                                        <th widht="100%" vertical-align="top">Body</th>
                                    </tr>
                                </thead>
                                <tbody id="LGType-200-history" class="row-hover">
                                </tbody>
                            </table>
                        </LoggerTable>
                        <LoggerTable haslog="true" id="LGType-411">
                            <div class="LoggerLabel">Basic information</div>
                            <table class="table  striped compact" style="background: transparent;">
                                <thead>
                                    <tr>
                                        <th width="120px" vertical-align="top" nowrap="true">Date/Time</th>
                                        <th width="20%" vertical-align="top" nowrap="true">Topic</th>
                                        <th width="20%" vertical-align="top" nowrap="true">Source</th>
                                        <th widht="100%" vertical-align="top">Body</th>
                                    </tr>
                                </thead>
                                <tbody id="LGType-411-history" class="row-hover">
                                </tbody>
                            </table>
                        </LoggerTable>
                        <LoggerTable haslog="true" id="LGType-466">
                            <div class="LoggerLabel">Socket Traffic</div>
                            <table class="table  striped compact" style="background: transparent;">
                                <thead>
                                    <tr>
                                        <th width="120px" vertical-align="top" nowrap="true">Date/Time</th>
                                        <th width="20%" vertical-align="top" nowrap="true">Topic</th>
                                        <th width="20%" vertical-align="top" nowrap="true">Source</th>
                                        <th widht="100%" vertical-align="top">Body</th>
                                    </tr>
                                </thead>
                                <tbody id="LGType-466-history" class="row-hover">
                                </tbody>
                            </table>
                        </LoggerTable>
                        <LoggerTable haslog="true" id="LGType-707">
                            <div class="LoggerLabel">UI updates in the browser</div>
                            <table class="table  striped compact" style="background: transparent;">
                                <thead>
                                    <tr>
                                        <th width="120px" vertical-align="top" nowrap="true">Date/Time</th>
                                        <th width="20%" vertical-align="top" nowrap="true">Topic</th>
                                        <th width="20%" vertical-align="top" nowrap="true">Source</th>
                                        <th widht="100%" vertical-align="top">Body</th>
                                    </tr>
                                </thead>
                                <tbody id="LGType-707-history" class="row-hover">
                                </tbody>
                            </table>
                        </LoggerTable>
                    </div>
                </div>

            </div>


        </MainTabDisplay>


        <!-- Because of the editor, you need to declare this first! -->
        <MainTabDisplay id="TabDebugger">



            <div class="DebugToolbar" title="URI Endpoint address">

                <div class="dropdown-button">
                    <button id="DebugVerbList_BTN" class="button dropdown-toggle"></button>
                    <ul id="DebugVerbList_UL" class="d-menu" data-role="dropdown">
                    </ul>
                </div>
                <div class="dropdown-button">
                    <button id="DebugSampleList_BTN" class="button dropdown-toggle"></button>
                    <ul id="DebugSampleList_UL" class="d-menu" data-role="dropdown">
                    </ul>
                </div>

                <div class="dropdown-button">
                    <button id="Export_BTN" class="button dropdown-toggle">Export</button>
                    <ul id="Export_UL" class="d-menu" data-role="dropdown">

                        <li><a href="#" title="Export sample code for CURL"
                                onclick="DebugUI.ExportCode('curl')">curl</a>
                        </li>
                        <li><a href="#" title="Export sample code for JavaScript Browser"
                                onclick="DebugUI.ExportCode('javascript-fetch')">JavaScript</a></li>
                        <li><a href="#" title="Export sample code for JavaScript HTTP Client"
                                onclick="DebugUI.ExportCode('javascript-http-request')">NodeJS</a></li>
                        <li><a href="#" title="Export sample code for pythod 3"
                                onclick="DebugUI.ExportCode('python 3')">Python 3</a></li>
                        <li><a class="disabled" href="#" title="Export sample code for C# .Net">C#</a></li>
                    </ul>
                </div>

            </div>



            <div class="split-container">

                <div data-role="splitter" class="h-100" data-split-sizes="60, 40" data-min-sizes="60,60"
                    data-gutter-size="8">

                    <div class="d-flex flex-justify-center flex-align-center">
                        <div class="split-header" title="The body of the request in JSON format">
                            &nbsp;<i class="fas fa-upload" style="color:silver"></i>
                            &nbsp;Upload JSON
                            <span id="Date_Uploaded"></span>
                            <span class="iconbuttons">
                                <a title="Use HTTP GET for the request" id="api-uri-link" href="#"
                                    target="_blank">GET</a>
                                <a title="Use HTTP PUT for the request"
                                    href="JavaScript:DebugUI.MakeHTTP_PUT_Request();">PUT</a>
                                <a title="Use the socket for the request"
                                    href="JavaScript:DebugUI.MakeSocketRequest();">SOCKET</a>
                            </span>
                        </div>
                        <div id="PayloadEditor" class="ace-editor"></div>
                    </div>
                    <div class="d-flex flex-justify-center flex-align-center">
                        <div class="split-header" title="The result of the request in JSON format">
                            &nbsp;<i class="fas fa-download" style="color:silver"></i>&nbsp;Download JSON
                            from Server <span id="Date_Downloaded"></span></div>
                        <div id="APIDebugResults" class="APIDebugResults"></div>
                    </div>
                </div>


            </div>


        </MainTabDisplay>


        <MainTabDisplay id="TabAppPrefs">



            <div style="padding:10px;">
                <h1>Web Application Preferences</h1>
                <p>
                    All values are stored locally in the browser, not the server. So if the
                    browser deletes it you will have to reinput the values.
                </p>
                <br>

                <div class="row">
                    <div class="cell-md-6">
                        <label>API Key</label>
                        <!-- <form > -->
                        <input id="APIKeyInput" type="password" autocomplete="off" placeholder="Enter your API Key">
                        <!-- </form> -->
                        <br>
                        <button class="button"
                            onclick="UIHelper.AppPrefs.TestKey(document.getElementById('APIKeyInput').value)">Test API
                            Key</button>
                    </div>
                    <div class="cell-md-6">
                        <label>Target Server</label>

                        <select data-role="select">
                            <optgroup label="Local Network">
                                <option value="localhost" selected="selected">localhost</option>
                                <option value="0.0.0.0">0.0.0.0</option>
                            </optgroup>
                            <optgroup label="Remote Servers">
                                <option value="demo.tektology.com">demo.tektology.com</option>
                            </optgroup>
                        </select>
                    </div>
                </div>

                <hr />

                <div class="row">
                    <div class="cell-md-10">
                        <p>
                            Use this to clear the browser local storage.
                        </p>
                        <p>
                            Remember that user settings are kept there so you
                            will have to put your preferences back in.
                        </p>
                    </div>
                    <div class="cell-md-2">
                        <button class="button" onclick="UIHelper.AppPrefs.ClearPrefs()">Clear Local Storage</button>
                    </div>
                </div>
                <br>

                <hr />
                <br>
                <!-- <div class="row">

                <div class="cell-md-8">
                    Corrrect
                </div>
                <div class="cell-md-2">
                    <input type="checkbox" data-role="switch" data-caption="Local Storage" checked>
                    <br>
                    <input type="checkbox" data-role="switch" data-caption="Log Changes" checked>
                </div>
            </div> -->

            </div>

        </MainTabDisplay>
        <MainTabDisplay id="TabMain" style="overflow:auto;"></MainTabDisplay>

    </desktop>

    <!-- 
        Simple way to let the user know the screen is too small
        Check the debug.css for the media query styles...
     -->
    <smallscreen>
        <center>

            <div>
                THE SCREEN IS TOO SMALL
                TO USE THIS DEMO!
            </div>
        </center>
    </smallscreen>
</body>

</html>